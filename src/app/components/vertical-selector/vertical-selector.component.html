<div class="vertical-selector-container">
  <!-- Step 1: Select Vertical -->
  <div class="step-section">
    <h3 class="step-title">Step 1: Select Vertical</h3>
    
    <div class="vertical-selection-wrapper">
      <mat-form-field appearance="outline" class="vertical-dropdown">
        <mat-label>Select Vertical</mat-label>
        <mat-select 
          [(value)]="selectedVertical"
          (selectionChange)="onVerticalSelect($event.value)">
          
          <!-- Vertical options -->
          <mat-option 
            *ngFor="let vertical of verticals" 
            [value]="vertical.id">
            <div class="option-content">
              <span class="option-text">{{ vertical.name }}</span>
              <span class="option-count">({{ vertical.subCategories?.length || 0 }} themes)</span>
            </div>
          </mat-option>
        </mat-select>
        <mat-icon matSuffix>business</mat-icon>
      </mat-form-field>
      
      <!-- Filter Button -->
      <button 
        mat-icon-button 
        class="filter-button" 
        (click)="toggleFilter()" 
        title="Filter options"
        [class.active]="isFilterOpen">
        <mat-icon>filter_list</mat-icon>
      </button>
    </div>
  </div>

  <!-- Step 2: Theme Cards (only shown when vertical is selected) -->
  <div class="step-section" *ngIf="selectedVertical && currentThemes.length > 0">
    <h3 class="step-title">Step 2: Select Theme</h3>
    
    <div class="theme-cards-grid">
      <mat-card 
        *ngFor="let theme of currentThemes" 
        class="theme-card"
        [class.selected]="selectedSubCategory === theme"
        (click)="onThemeSelect(theme)">
        
        <mat-card-content>
          <div class="theme-card-content">
            <mat-icon class="theme-icon">category</mat-icon>
            <span class="theme-text">{{ theme }}</span>
          </div>
        </mat-card-content>
        
        <mat-card-actions>
          <button 
            mat-button 
            color="primary" 
            class="select-theme-btn">
            Select Theme
          </button>
        </mat-card-actions>
      </mat-card>
    </div>
  </div>

  <!-- Selected Summary -->
  <div class="selection-summary" *ngIf="selectedVertical">
    <div class="summary-item">
      <mat-icon>check_circle</mat-icon>
      <span class="summary-text">
        <strong>Vertical:</strong> {{ selectedVerticalData?.name }}
      </span>
    </div>
    <div class="summary-item" *ngIf="selectedSubCategory">
      <mat-icon>check_circle</mat-icon>
      <span class="summary-text">
        <strong>Theme:</strong> {{ selectedSubCategory }}
      </span>
    </div>
  </div>

  <!-- Filter Panel -->
  <div class="filter-panel" [class.open]="isFilterOpen" *ngIf="selectedVertical">
    <div class="filter-header">
      <span class="header-text">Filter Options</span>
      <button mat-icon-button (click)="toggleFilter()" class="close-filter">
        <mat-icon>close</mat-icon>
      </button>
    </div>
    <div class="filter-content">
      <div class="filter-section">
        <label class="filter-label">Sort by:</label>
        <div class="filter-options">
          <label class="filter-option">
            <input type="radio" name="sort" value="name" checked>
            <span>Name</span>
          </label>
          <label class="filter-option">
            <input type="radio" name="sort" value="popularity">
            <span>Popularity</span>
          </label>
          <label class="filter-option">
            <input type="radio" name="sort" value="recent">
            <span>Recent</span>
          </label>
        </div>
      </div>
    </div>
  </div>
</div>
